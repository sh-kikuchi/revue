__NUXT_JSONP__("/blog/laravel/009_DBquery", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B){return {data:[{content:{slug:"009_DBquery",description:"DBファザード",title:"DB操作のいろいろ",category:"Laravel",createdAt:"2021-12-01T15:21:10.522Z",updatedAt:"2021-12-02T00:00:00.000Z",sortNumber:"009",toc:[],body:{type:"root",children:[{type:b,tag:p,props:{id:"dbクラス共通の記述"},children:[{type:b,tag:m,props:{href:"#db%E3%82%AF%E3%83%A9%E3%82%B9%E5%85%B1%E9%80%9A%E3%81%AE%E8%A8%98%E8%BF%B0",ariaHidden:q,tabIndex:r},children:[{type:b,tag:i,props:{className:[s,t]},children:[]}]},{type:a,value:"DBクラス共通の記述"}]},{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:"DBクラスでもクエリビルダでもDBファサードによる記述のため"},{type:b,tag:d,props:{},children:[{type:a,value:"Illuminate\\Support\\Facades\\DB"}]},{type:a,value:"をuseします。"}]},{type:a,value:c},{type:b,tag:e,props:{className:[f]},children:[{type:b,tag:g,props:{className:[h,"language-php"]},children:[{type:b,tag:d,props:{},children:[{type:b,tag:i,props:{className:[l,"keyword"]},children:[{type:a,value:"use"}]},{type:a,value:" "},{type:b,tag:i,props:{className:[l,"package"]},children:[{type:a,value:"Illuminate"},{type:b,tag:i,props:{className:[l,n]},children:[{type:a,value:o}]},{type:a,value:"Support"},{type:b,tag:i,props:{className:[l,n]},children:[{type:a,value:o}]},{type:a,value:"Facades"},{type:b,tag:i,props:{className:[l,n]},children:[{type:a,value:o}]},{type:a,value:"DB"}]},{type:b,tag:i,props:{className:[l,n]},children:[{type:a,value:";"}]},{type:a,value:c}]}]}]},{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:"#DBクラスによる操作\r\n"},{type:b,tag:d,props:{},children:[{type:a,value:"DB::SQL値(SQL文、パラメータ配列)"}]},{type:a,value:"で記述する方法でデーターべースを操作します。\r\nSQL文をそのまま使用するイメージで記述できるためわかりやすいですが他の記述方法よりSQL文を理解する必要があります。"}]},{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:u}]},{type:a,value:c},{type:b,tag:e,props:{className:[f]},children:[{type:b,tag:g,props:{className:[h,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"public function select(Request $request) {\n $items = DB::select('SELECT * from users');\n return view('sample.index',['items' =\u003E $items]);\n}\n\n\u002F\u002F 記述方法：DB::select('SELECT文')\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{className:[f]},children:[{type:b,tag:g,props:{className:[h,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"public function select(Request $request) {\n $items = DB::select('SELECT * from users where id =:id', ['id'=\u003E$request-\u003Eid]);\n return view('sample.index',['items' =\u003E $items[0]]);\n}\n\n\u002F\u002F 記述方法：DB::select('SELECT文', 'パラメータ')\n\u002F\u002F returnする際は、配列の0番目であることを記述すること\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{className:[f]},children:[{type:b,tag:g,props:{className:[h,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"public function update(Request $request) {\n $param = [\n  'id' =\u003E $request-\u003Eid\n  'name' =\u003E $request-\u003Ename,\n  'age' =\u003E $request-\u003Eage,\n ];\n DB::update('UPDATE users set name=:name, email=:email where id=:id', $param);\n}\n\n\u002F\u002F 記述方法：DB::update('UPDATE文', 'パラメータ')\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{className:[f]},children:[{type:b,tag:g,props:{className:[h,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"public function dalete(Request $request) {\n  $param = ['id' =\u003E $request-\u003Eid];\n  DB::delete('DELETE from sample where id =:id', $param);\n}\n\n\u002F\u002F 記述方法：DB::dalete('DELETE文', 'パラメータ')\n"}]}]}]},{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:"#クリエビルダによる操作\r\nSQL文を生成するためのメソッドをメソッドチェーンで記述することによりデーターベースを操作します。\r\n"},{type:b,tag:d,props:{},children:[{type:a,value:"DB::table('テーブル名')-\u003EDBメソッド"}]},{type:a,value:"のように記述して操作します。\r\nDBクラスのメソッドですが、ほぼSQL文と同じように記述できるためSQL文がある程度理解できていれば違和感なく使用できると思います。"}]},{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:u}]},{type:a,value:c},{type:b,tag:e,props:{className:[f]},children:[{type:b,tag:g,props:{className:[h,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"public function select(Request $request) {\n $items = DB::table('users')-\u003Eget();\n return view('hello.index',['items' =\u003E $items]);\n}\n\n\u002F\u002F 記述方法： DB::table('テーブル名')-\u003Eget(['フィールド名', )\n\u002F\u002F getメソッドの引数を指定しなければ全てのフィールドが取得される\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{className:[f]},children:[{type:b,tag:g,props:{className:[h,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"public function select(Request $request) {\n $items = DB::table('users')-\u003Ewhere('id',$request-\u003Eid)-\u003Efirst();\n return view('hello.index',['items' =\u003E $items]);\n}\n\n\u002F\u002F 記述方法：DB::table('テーブル名')-\u003Ewhere('フィールド名',パラメータ)-\u003Efirst();\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{className:[f]},children:[{type:b,tag:g,props:{className:[h,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"public function update(Request $request) {\n $param = [\n  'id' =\u003E $request-\u003Eid\n  'name' =\u003E $request-\u003Ename,\n  'age' =\u003E $request-\u003Eage,\n ];\n DB::table('users')-\u003Ewhere('id',$request-\u003Eid)-\u003Eupdate($param);\n}\n\n\u002F\u002F 記述方法：DB::table('テーブル名')-\u003Ewhere('フィール名',パラメータ)-\u003Eupdate(パラメータ);\n"}]}]}]},{type:a,value:c},{type:b,tag:e,props:{className:[f]},children:[{type:b,tag:g,props:{className:[h,j]},children:[{type:b,tag:d,props:{},children:[{type:a,value:"public function dalete(Request $request) {\n  DB::table('samole')-\u003Ewhere('id', $request-\u003Eid)-\u003Edelete();\n}\n\n\u002F\u002F 記述方法：DB::table('テーブル名')-\u003Ewhere('フィール名',パラメータ)-\u003Edelete(パラメータ);\n"}]}]}]},{type:a,value:c},{type:b,tag:p,props:{id:v},children:[{type:b,tag:m,props:{href:"#%E5%8F%82%E8%80%83",ariaHidden:q,tabIndex:r},children:[{type:b,tag:i,props:{className:[s,t]},children:[]}]},{type:a,value:v}]},{type:a,value:c},{type:b,tag:k,props:{},children:[{type:a,value:"[データベース：利用開始]\r\n("},{type:b,tag:m,props:{href:w,rel:[x,y,z],target:A},children:[{type:a,value:w}]},{type:a,value:")\r\n[データベース：クリエビルダ]\r\n("},{type:b,tag:m,props:{href:B,rel:[x,y,z],target:A},children:[{type:a,value:B}]},{type:a,value:")"}]}]},dir:"\u002Fblog\u002Flaravel",path:"\u002Fblog\u002Flaravel\u002F009_DBquery",extension:".md"}}],fetch:{},mutations:[]}}("text","element","\n","code","div","nuxt-content-highlight","pre","line-numbers","span","language-text","p","token","a","punctuation","\\","h1","true",-1,"icon","icon-link","例）usersテーブルのselectとupdateとdelete","参考","https:\u002F\u002Freadouble.com\u002Flaravel\u002F6.x\u002Fja\u002Fdatabase.html","nofollow","noopener","noreferrer","_blank","https:\u002F\u002Freadouble.com\u002Flaravel\u002F6.x\u002Fja\u002Fqueries.html")));