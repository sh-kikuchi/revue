__NUXT_JSONP__("/blog/laravel/013_whereHas", (function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M){return {data:[{content:{slug:"013_whereHas",description:"whereHasの活用方法",title:"中間テーブルに対する検索",category:"Laravel",createdAt:H,updatedAt:H,sortNumber:13,toc:[],body:{type:"root",children:[{type:b,tag:t,props:{id:"1-はじめに"},children:[{type:b,tag:j,props:{href:"#1-%E3%81%AF%E3%81%98%E3%82%81%E3%81%AB",ariaHidden:u,tabIndex:v},children:[{type:b,tag:c,props:{className:[w,x]},children:[]}]},{type:a,value:"1. はじめに"}]},{type:a,value:e},{type:b,tag:n,props:{},children:[{type:a,value:"「あるチャンネルに属するユーザーを出す」というクエリ文を書きたい、、こう思っていたのだが、両者の関係が「多」対「多」なので書こうと思うと意外にめんどくさい気がする。whereHasの処理は遅いらしく、ベストプラクティスではないかもしれない。けれど、スキル的にはストックしておこうと思う。ヴァージョンはLaravel9で動作検証済み。。"}]},{type:a,value:e},{type:b,tag:o,props:{},children:[]},{type:a,value:e},{type:b,tag:n,props:{},children:[{type:a,value:"■ この実装を行ったアプリ: "},{type:b,tag:j,props:{href:"http:\u002F\u002Ftoolbox-smalltalk.herokuapp.com\u002Flogin",rel:[y,z,A],target:B},children:[{type:a,value:"smalltalk"}]}]},{type:a,value:e},{type:b,tag:C,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"メールアドレス（テスト用）："},{type:b,tag:j,props:{href:"mailto:test@test.com"},children:[{type:a,value:"test@test.com"}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"パスワード（テスト用）：testtest"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[]},{type:a,value:e},{type:b,tag:t,props:{id:"2-wherehas"},children:[{type:b,tag:j,props:{href:"#2-wherehas",ariaHidden:u,tabIndex:v},children:[{type:b,tag:c,props:{className:[w,x]},children:[]}]},{type:a,value:"2. whereHas"}]},{type:a,value:e},{type:b,tag:n,props:{},children:[{type:a,value:"whereHasはリレーション先の中間テーブルのカラムの値に対して検索をかけたい時に使える。"}]},{type:a,value:e},{type:b,tag:C,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"channels"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"users"}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:a,value:"channel_user(中間テーブル)"}]},{type:a,value:e}]},{type:a,value:e},{type:b,tag:o,props:{},children:[]},{type:a,value:e},{type:b,tag:n,props:{},children:[{type:a,value:"コールバック関数の中でリレーション先である中間テーブル(channel_user)の検索条件を指定してあげれば良い。\r\nuse( 変数 )と渡してあげると、変数を扱うことが可能。ここで$channel（Channelというモデルから出来たインスタンス、依存性の注入）を変数としてセットすると、その中でクエリの条件として使用することができる。"}]},{type:a,value:e},{type:b,tag:o,props:{},children:[]},{type:a,value:e},{type:b,tag:"div",props:{className:["nuxt-content-highlight"]},children:[{type:b,tag:"pre",props:{className:["language-php","line-numbers"]},children:[{type:b,tag:"code",props:{},children:[{type:a,value:"    "},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"public"}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:g}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,"function-definition",g]},children:[{type:a,value:"index"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,"class-name","type-declaration"]},children:[{type:a,value:"Channel"}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:a,value:I},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:"$users"}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:"="}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,"scope"]},children:[{type:a,value:"User"},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:"::"}]}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:"whereHas"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,r,s]},children:[{type:a,value:"'channels'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:E}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:g}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"use"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:J}]},{type:a,value:"\n             "},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:L}]},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:"where"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,r,s]},children:[{type:a,value:"'channel_user.channel_id'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,m]},children:[{type:a,value:D}]},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,"property"]},children:[{type:a,value:"id"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:"\n        "},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:M}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,q]},children:[{type:a,value:F}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:"paginate"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,"number"]},children:[{type:a,value:"10"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:K},{type:b,tag:c,props:{className:[d,p]},children:[{type:a,value:"return"}]},{type:a,value:l},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:"view"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,r,s]},children:[{type:a,value:"'user.index'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:E}]},{type:b,tag:c,props:{className:[d,g]},children:[{type:a,value:"compact"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:h}]},{type:b,tag:c,props:{className:[d,r,s]},children:[{type:a,value:"'users'"}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:i}]},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:G}]},{type:a,value:I},{type:b,tag:c,props:{className:[d,f]},children:[{type:a,value:M}]},{type:a,value:e}]}]}]},{type:a,value:e},{type:b,tag:o,props:{},children:[]},{type:a,value:e},{type:b,tag:t,props:{id:"3-おわりに"},children:[{type:b,tag:j,props:{href:"#3-%E3%81%8A%E3%82%8F%E3%82%8A%E3%81%AB",ariaHidden:u,tabIndex:v},children:[{type:b,tag:c,props:{className:[w,x]},children:[]}]},{type:a,value:"3. おわりに"}]},{type:a,value:e},{type:b,tag:n,props:{},children:[{type:a,value:"中間テーブル（channel_user）をつくると、channelsとusersには外部キーがないため、どうやって連携するんだという少し考える必要がある。eloquentはLaravelでのDB操作の作法だから、その点ではFWならではの学習コストがかかりますなとシミジミ...。"}]},{type:a,value:e},{type:b,tag:C,props:{},children:[{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:j,props:{href:"https:\u002F\u002Fakizora.tech\u002Flaravel-wherehas-4276",rel:[y,z,A],target:B},children:[{type:a,value:"【Laravel】EloquentのwhereHasで変数を扱う方法！"}]}]},{type:a,value:e},{type:b,tag:k,props:{},children:[{type:b,tag:j,props:{href:"https:\u002F\u002Fblog.popweb.dev\u002Fprogramming\u002Flaravel\u002F%E3%80%90laravel%E3%80%91%E4%B8%AD%E9%96%93%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB%E3%81%AE%E3%82%AB%E3%83%A9%E3%83%A0%E3%81%AB%E5%AF%BE%E3%81%97%E3%81%A6%E6%A4%9C%E7%B4%A2%E3%82%92%E3%81%8B%E3%81%91\u002F",rel:[y,z,A],target:B},children:[{type:a,value:"【Laravel】中間テーブルのカラムに対して検索をかけたい時"}]}]},{type:a,value:e}]}]},dir:"\u002Fblog\u002Flaravel",path:"\u002Fblog\u002Flaravel\u002F013_whereHas",extension:".md"},navigation:"blog\u002Flaravel",dirParam:"laravel"}],fetch:{},mutations:[]}}("text","element","span","token","\n","punctuation","function","(",")","a","li"," ","variable","p","br","keyword","operator","string","single-quoted-string","h1","true",-1,"icon","icon-link","nofollow","noopener","noreferrer","_blank","ul","$channel",",","-\u003E",";","2022-06-15T00:00:00.000Z","\n    ","{","\n\n        ","$query","}")));